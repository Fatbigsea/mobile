(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-e467678e"],{"1ed2":function(t,e,n){},2423:function(t,e,n){"use strict";n.d(e,"e",(function(){return r})),n.d(e,"f",(function(){return i})),n.d(e,"a",(function(){return c})),n.d(e,"c",(function(){return o})),n.d(e,"b",(function(){return s})),n.d(e,"d",(function(){return u})),n.d(e,"g",(function(){return l})),n.d(e,"h",(function(){return f})),n.d(e,"i",(function(){return h}));var a=n("b775"),r=function(t){return Object(a["a"])({method:"get",url:"/app/v1_1/articles",params:t})},i=function(t){return Object(a["a"])({method:"get",url:"/app/v1_0/articles/".concat(t)})},c=function(t){return Object(a["a"])({method:"post",url:"/app/v1_0/article/collections",data:{target:t}})},o=function(t){return Object(a["a"])({method:"delete",url:"/app/v1_0/article/collections/".concat(t)})},s=function(t){return Object(a["a"])({method:"post",url:"/app/v1_0/article/likings",data:{target:t}})},u=function(t){return Object(a["a"])({method:"delete",url:"/app/v1_0/article/likings/".concat(t)})},l=function(t){return Object(a["a"])({method:"get",url:"/app/v1_0/user/articles",params:t})},f=function(t){return Object(a["a"])({method:"get",url:"/app/v1_0/article/collections",params:t})},h=function(t){return Object(a["a"])({method:"get",url:"/app/v1_0/user/histories",params:t})}},"25f0":function(t,e,n){"use strict";var a=n("6eeb"),r=n("825a"),i=n("d039"),c=n("ad6d"),o="toString",s=RegExp.prototype,u=s[o],l=i((function(){return"/a/b"!=u.call({source:"a",flags:"b"})})),f=u.name!=o;(l||f)&&a(RegExp.prototype,o,(function(){var t=r(this),e=String(t.source),n=t.flags,a=String(void 0===n&&t instanceof RegExp&&!("flags"in s)?c.call(t):n);return"/"+e+"/"+a}),{unsafe:!0})},2909:function(t,e,n){"use strict";function a(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}n("a4d3"),n("e01a"),n("d28b"),n("a630"),n("e260"),n("d3b7"),n("25f0"),n("3ca3"),n("ddb0");function r(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}function i(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function c(t){return a(t)||r(t)||i()}n.d(e,"a",(function(){return c}))},"4df4":function(t,e,n){"use strict";var a=n("f8c2"),r=n("7b0b"),i=n("9bdd"),c=n("e95a"),o=n("50c4"),s=n("8418"),u=n("35a1");t.exports=function(t){var e,n,l,f,h,d=r(t),p="function"==typeof this?this:Array,v=arguments.length,m=v>1?arguments[1]:void 0,g=void 0!==m,b=0,w=u(d);if(g&&(m=a(m,v>2?arguments[2]:void 0,2)),void 0==w||p==Array&&c(w))for(e=o(d.length),n=new p(e);e>b;b++)s(n,b,g?m(d[b],b):d[b]);else for(f=w.call(d),h=f.next,n=new p;!(l=h.call(f)).done;b++)s(n,b,g?i(f,m,[l.value,b],!0):l.value);return n.length=b,n}},5899:function(t,e){t.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},"58a8":function(t,e,n){var a=n("1d80"),r=n("5899"),i="["+r+"]",c=RegExp("^"+i+i+"*"),o=RegExp(i+i+"*$"),s=function(t){return function(e){var n=String(a(e));return 1&t&&(n=n.replace(c,"")),2&t&&(n=n.replace(o,"")),n}};t.exports={start:s(1),end:s(2),trim:s(3)}},7156:function(t,e,n){var a=n("861d"),r=n("d2bb");t.exports=function(t,e,n){var i,c;return r&&"function"==typeof(i=e.constructor)&&i!==n&&a(c=i.prototype)&&c!==n.prototype&&r(t,c),t}},"7abe":function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"home-container"},[n("van-nav-bar",{attrs:{title:"首页",fixed:""}},[n("van-button",{attrs:{slot:"title",round:"",size:"small",plain:"",type:"info"},on:{click:function(e){return t.$router.push("/search")}},slot:"title"},[t._v(" 搜索 ")])],1),n("van-tabs",{model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[n("van-icon",{staticClass:"wap-nav",attrs:{slot:"nav-right",name:"wap-nav"},on:{click:function(e){t.isPopupShow=!0}},slot:"nav-right"}),t._l(t.channels,(function(t){return n("van-tab",{key:t.id,attrs:{title:t.name}},[n("ArticleList",{attrs:{channel:t}})],1)}))],2),n("van-popup",{style:{height:"95%"},attrs:{closeable:"",round:"",position:"bottom"},model:{value:t.isPopupShow,callback:function(e){t.isPopupShow=e},expression:"isPopupShow"}},[n("channel-edit",{attrs:{"user-channel":t.channels},on:{close:function(e){t.isPopupShow=!1}},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}})],1)],1)},r=[],i=(n("96cf"),n("1da1")),c=n("b775"),o=function(){return Object(c["a"])({method:"get",url:"/app/v1_0/user/channels"})},s=function(){return Object(c["a"])({method:"get",url:"/app/v1_0/channels"})},u=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"article-list"},[n("van-pull-refresh",{on:{refresh:t.onRefresh},model:{value:t.isLoading,callback:function(e){t.isLoading=e},expression:"isLoading"}},[n("van-list",{attrs:{finished:t.finished,"finished-text":"没有更多了"},on:{load:t.onLoad},model:{value:t.loading,callback:function(e){t.loading=e},expression:"loading"}},t._l(t.list,(function(e,a){return n("van-cell",{key:a,attrs:{title:e.title},on:{click:function(n){return t.$router.push("/article/"+e.art_id)}}})})),1)],1)],1)},l=[],f=n("2909"),h=n("2423"),d={name:"ArticleList",data:function(){return{list:[],loading:!1,finished:!1,timestamp:null,isLoading:!1}},props:{channel:{type:Object,required:!0}},methods:{onRefresh:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){var e,n,a,r=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(h["e"])({channel_id:this.channel.id,timestamp:Date.now(),with_top:1});case 2:e=t.sent,n=e.data,a=n.data.results,setTimeout((function(){for(var t=0;t<10;t++){var e;(e=r.list).unshift.apply(e,Object(f["a"])(a))}r.$toast("刷新成功".concat(a.length,"条新闻")),r.isLoading=!1}),1e3);case 6:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),onLoad:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){var e,n,a,r=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(h["e"])({channel_id:this.channel.id,timestamp:this.timestamp||Date.now(),with_top:1});case 2:e=t.sent,n=e.data,a=n.data.results,setTimeout((function(){for(var t=0;t<10;t++){var e;(e=r.list).push.apply(e,Object(f["a"])(a))}r.loading=!1,a.length?r.timestamp=n.data.pre_timestamp:r.finished=!0}),500);case 6:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()}},p=d,v=n("2877"),m=Object(v["a"])(p,u,l,!1,null,null,null),g=m.exports,b=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"channel-edit"},[n("van-cell-group",[n("van-cell",{attrs:{title:"我的频道"}},[n("van-button",{attrs:{slot:"right-icon",type:"danger",round:"",size:"mini"},on:{click:function(e){t.isEditShow=!t.isEditShow}},slot:"right-icon"},[t._v(" "+t._s(t.isEditShow?"完成":"编辑")+" ")])],1),n("van-cell",[n("van-grid",{attrs:{gutter:10}},t._l(t.userChannel,(function(e,a){return n("van-grid-item",{key:e.id,on:{click:function(e){return t.changeOrDel(a)}}},[n("span",{staticClass:"text",class:{active:t.value===a},attrs:{slot:"text"},slot:"text"},[t._v(" "+t._s(e.name))]),!0===t.isEditShow&&0!==a?n("van-icon",{staticClass:"close-icon",attrs:{slot:"icon",name:"close",size:"24"},slot:"icon"}):t._e()],1)})),1)],1)],1),n("van-cell-group",[n("van-cell",{attrs:{title:"频道推荐"}}),n("van-cell",[n("van-grid",{attrs:{gutter:10}},t._l(t.remainChannels,(function(e){return n("van-grid-item",{key:e.id,attrs:{text:e.name},on:{click:function(n){return t.addChannel(e)}}})})),1)],1)],1)],1)},w=[],_=(n("7db0"),n("a434"),n("a9e3"),n("159b"),n("5d2d")),y={name:"channelEdit",props:{userChannel:{type:Array,required:!0},value:{type:Number,required:!0}},data:function(){return{allChannels:[],isEditShow:!1}},methods:{getAll:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){var e,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,s();case 2:e=t.sent,n=e.data,this.allChannels=n.data.channels;case 5:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),addChannel:function(t){this.userChannel.push(t)},changeOrDel:function(t){this.isEditShow&&0!==t?this.userChannel.splice(t,1):(this.$emit("input",t),this.$emit("close"))}},computed:{remainChannels:function(){var t=this,e=[];return this.allChannels.forEach((function(n){t.userChannel.find((function(t){return t.id===n.id}))||e.push(n)})),e}},watch:{userChannel:function(){Object(_["b"])("user-channel",this.userChannel)}},created:function(){this.getAll()}},x=y,O=(n("dbe3"),Object(v["a"])(x,b,w,!1,null,"d6c0a48c",null)),E=O.exports,j={name:"HomePage",data:function(){return{activeName:0,channels:[],isPopupShow:!1}},components:{ArticleList:g,ChannelEdit:E},methods:{getChannel:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){var e,n,a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e=[],n=Object(_["a"])("user-channel"),!n){t.next=6;break}e=n,t.next=11;break;case 6:return t.next=8,o();case 8:a=t.sent,r=a.data,e=r.data.channels;case 11:this.channels=e;case 12:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},created:function(){this.getChannel(),this.$store.state.user&&this.getChannel()}},k=j,C=(n("a57a"),Object(v["a"])(k,a,r,!1,null,"0b3bb101",null));e["default"]=C.exports},a57a:function(t,e,n){"use strict";var a=n("1ed2"),r=n.n(a);r.a},a630:function(t,e,n){var a=n("23e7"),r=n("4df4"),i=n("1c7e"),c=!i((function(t){Array.from(t)}));a({target:"Array",stat:!0,forced:c},{from:r})},a9e3:function(t,e,n){"use strict";var a=n("83ab"),r=n("da84"),i=n("94ca"),c=n("6eeb"),o=n("5135"),s=n("c6b6"),u=n("7156"),l=n("c04e"),f=n("d039"),h=n("7c73"),d=n("241c").f,p=n("06cf").f,v=n("9bf2").f,m=n("58a8").trim,g="Number",b=r[g],w=b.prototype,_=s(h(w))==g,y=function(t){var e,n,a,r,i,c,o,s,u=l(t,!1);if("string"==typeof u&&u.length>2)if(u=m(u),e=u.charCodeAt(0),43===e||45===e){if(n=u.charCodeAt(2),88===n||120===n)return NaN}else if(48===e){switch(u.charCodeAt(1)){case 66:case 98:a=2,r=49;break;case 79:case 111:a=8,r=55;break;default:return+u}for(i=u.slice(2),c=i.length,o=0;o<c;o++)if(s=i.charCodeAt(o),s<48||s>r)return NaN;return parseInt(i,a)}return+u};if(i(g,!b(" 0o1")||!b("0b1")||b("+0x1"))){for(var x,O=function(t){var e=arguments.length<1?0:t,n=this;return n instanceof O&&(_?f((function(){w.valueOf.call(n)})):s(n)!=g)?u(new b(y(e)),n,O):y(e)},E=a?d(b):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),j=0;E.length>j;j++)o(b,x=E[j])&&!o(O,x)&&v(O,x,p(b,x));O.prototype=w,w.constructor=O,c(r,g,O)}},dbe3:function(t,e,n){"use strict";var a=n("f168"),r=n.n(a);r.a},f168:function(t,e,n){}}]);
//# sourceMappingURL=chunk-e467678e.aaae0920.js.map